# ๐ ะะพะดัะปั HWID ัะฒะตะดะพะผะปะตะฝะธะน - ะฃะฟัะพัะตะฝะฝะฐั ะฒะตััะธั

> **โ๏ธ ะะะะะ:** ะะพะดัะปั ะฒะทะฐะธะผะพะดะตะนััะฒัะตั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั Remnawave ะธ ะดะพะฑะฐะฒะปัะตั ะปะพะณะธะบั ะฒ PostgreSQL

### ๐ ะะพัะฐะณะพะฒะฐั ัััะฐะฝะพะฒะบะฐ

#### 1๏ธโฃ ะะฐ ัะตัะฒะตัะต ั ะฟะฐะฝะตะปัั Remnawave

```bash
# ะะฐัะพะดะธะผ ะฒ ะดะธัะตะบัะพัะธั ะฟะฐะฝะตะปะธ Remnawave
cd /opt/remnawave

# !!!ะฃััะฐะฝะพะฒะธัะต ัะฐะนะป install_remnawave_hwid_bridge.sh ะฒ ััั ะดะธัะตะบัะพัะธั

# ะะตะปะฐะตะผ ะธัะฟะพะปะฝัะตะผัะผ
chmod +x install_remnawave_hwid_bridge.sh

# ะะฐะฟััะบะฐะตะผ ัััะฐะฝะพะฒะบั
sudo ./install_remnawave_hwid_bridge.sh
```

**ะฃััะฐะฝะพะฒัะธะบ ะฟะพะฟัะพัะธั:**
- **URL ะฒะฐัะตะณะพ ะฑะพัะฐ** (ะฝะฐะฟัะธะผะตั: `https://bot.domain.ru`)
- ะะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐะนะดะตั ะฝะฐัััะพะนะบะธ PostgreSQL ะธะท `.env`
- ะฃััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ ะธ ัะพะทะดะฐัั systemd ัะตัะฒะธั
- ะะฐัััะพะธั PostgreSQL ััะธะณะณะตั ะดะปั ัะฒะตะดะพะผะปะตะฝะธะน

#### 2๏ธโฃ ะะฐ ัะตัะฒะตัะต ั Telegram ะฑะพัะพะผ

**A. ะกะบะพะฟะธััะนัะต ะผะพะดัะปั:**

ะกะบะพะฟะธััะนัะต ะฟะฐะฟะบั devices ะฒ ะฟะฐะฟะบั modules



**B. ะะฐัััะพะนัะต ะฟัะพะบัะธ-ัะตัะฒะตั:**

**ะะปั Nginx:**
```nginx
location /devices/webhook {
    proxy_pass http://localhost:3001;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```

**ะะปั Caddy:**
```caddy
yourdomain.com {
    # HWID webhook
    reverse_proxy /devices/webhook localhost:3001
    
}
```

**C. ะะตัะตะทะฐะฟัััะธัะต ะฑะพัะฐ:**
```bash
sudo systemctl restart your-bot-service
```



### ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

**ะะฐ ัะตัะฒะตัะต Remnawave:**
```bash
# ะกัะฐััั ัะตัะฒะธัะฐ ะผะพััะฐ
systemctl status hwid-webhook-bridge

# ะะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
journalctl -u hwid-webhook-bridge -f

# ะะพะณะธ ัะฐะนะปะฐ
tail -f /var/log/hwid_webhook_bridge.log
```



## ๐ ะกัััะบัััะฐ ะผะพะดัะปั (ะะบัะธะฒะฝัะต ัะฐะนะปั)

### ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั:
- **`router.py`** - ะะพััะตั ั ะบะพะผะฐะฝะดะฐะผะธ ะธ HTTP webhook ะพะฑัะฐะฑะพััะธะบะพะผ
- **`http_webhook.py`** - ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดััะธั HWID ัะฒะตะดะพะผะปะตะฝะธะน 
- **`database_helper.py`** - ะะพะดะบะปััะตะฝะธะต ะบ ะฑะฐะทะต ะดะฐะฝะฝัั ะฑะพัะฐ
- **`settings.py`** - ะะฐัััะพะนะบะธ ะผะพะดัะปั
- **`texts.py`** - ะขะตะบััั ัะพะพะฑัะตะฝะธะน
- **`launcher.py`** - ะะฒัะพะดะตัะตะบั ะฑะพัะฐ
- **`main_webhook_hook.py`** - ะฅัะบ ะดะปั ะพัะฝะพะฒะฝะพะณะพ webhook

### ะะฐะณะปััะบะธ ะดะปั ัะพะฒะผะตััะธะผะพััะธ:
- **`monitor.py`** - ะะธะฝะธะผะฐะปัะฝัะต ะทะฐะณะปััะบะธ ััะฝะบัะธะน
- **`init.py`** - ะฃะฟัะพัะตะฝะฝะฐั ะธะฝะธัะธะฐะปะธะทะฐัะธั
- **`__init__.py`** - ะงะธัััะต ะธะผะฟะพััั

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ
โ   Remnawave     โ    โ  hwid_webhook_bridge โ    โ    Telegram Bot     โ
โ   PostgreSQL    โโโโโถโ       (ะผะพัั)         โโโโโถโ  /devices/webhook   โ
โ    ััะธะณะณะตั      โ    โ                      โ    โ                     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ
                                 โ                            โ
                                 โผ                            โผ
                    HTTP POST ะทะฐะฟัะพั               ะฃะฒะตะดะพะผะปะตะฝะธะต ะฒ Telegram
                    ะฝะฐ ะดะพะผะตะฝ ะฑะพัะฐ                        ะฟะพะปัะทะพะฒะฐัะตะปั
```


## ๐จ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะฃะฒะตะดะพะผะปะตะฝะธั ะฝะต ะฟัะธัะพะดัั:
1. ะัะพะฒะตัััะต ััะฐััั ะผะพััะฐ: `systemctl status hwid-webhook-bridge`
2. ะัะพะฒะตัััะต ะปะพะณะธ: `journalctl -u hwid-webhook-bridge -n 20`
3. ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั webhook: `curl -X POST https://yourbot.com/devices/webhook`

### HTTP 500 ะพัะธะฑะบะฐ:
1. ะัะพะฒะตัััะต ะปะพะณะธ ะฑะพัะฐ ะฝะฐ ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ [devices]
2. ะฃะฑะตะดะธัะตัั ััะพ ะผะพะดัะปั ะฟัะฐะฒะธะปัะฝะพ ัััะฐะฝะพะฒะปะตะฝ

### ะะพัั ะฝะต ััะฐัััะตั:
1. ะัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ PostgreSQL ะฒ .env ัะฐะนะปะต
2. ะฃะฑะตะดะธัะตัั ััะพ PostgreSQL ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ: `docker ps | grep postgres`

## ๐ก๏ธ ะะตะทะพะฟะฐัะฝะพััั

- โ ะะพัั ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ั ะปะพะบะฐะปัะฝะพะน PostgreSQL
- โ HTTP ะทะฐะฟัะพัั ัะพะปัะบะพ ะฝะฐ ัะบะฐะทะฐะฝะฝัะน URL ะฑะพัะฐ
- โ ะะธะบะฐะบะธั ะฒะฝะตัะฝะธั ะฟะพะดะบะปััะตะฝะธะน ะบ ะฑะฐะทะต
- โ ะะพะปะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะพะฟะตัะฐัะธะน

---

